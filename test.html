
<html>
<head>
	<title>気象衛星画像</title>
	
	
	<script language="javascript">
		var $g_cnt  =-1;
		
		function mkInit(){
			mkGMS();
			mkMAP();
			mkNOWCAST();
			//document.getElementById("print_msg").innerHTML =
		}
		
		function mkGMS(){
			$g_cnt++;
			var $time=new Date(); $time.setMinutes( $time.getMinutes()-20 );
			var $kind; if( $g_cnt%3==0 ){ $kind="infrared"; }else if( $g_cnt%3==1 ){ $kind="visible"; }else{ $kind="watervapor"; }
			document.getElementById("gms_name").innerHTML = $kind;
			document.gms.src="http://www.jma.go.jp/jp/gms/imgs_c/0/" +$kind +"/1/" +$time.getFullYear() +("0"+($time.getMonth()+1)).slice(-2) +("0"+$time.getDate()).slice(-2) +("0"+$time.getHours()).slice(-2) +("0"+$time.getMinutes()).slice(-2).substr(0,1) +"0-00.png";
		}
		
		function mkMAP(){
			var $now    =new Date();
			
			//実況
			var $time=$now; $time.setMinutes( $time.getMinutes()-130 );
			var $hour=$time.getHours()
			var $hh; if( $hour>=21 || $hour<3 ){ $hh="21"; }else if( $hour>=18 ){ $hh="18"; }else if( $hour>=15 ){ $hh="15"; }else if( $hour>=12 ){ $hh="12"; }else if( $hour>=9 ){ $hh="09"; }else{ $hh="06"; }
			document.map00.src="https://www.jma.go.jp/jp/g3/images/jp_c/" +$time.getFullYear().toString().slice(-2) +("0"+($time.getMonth()+1)).slice(-2) +("0"+$time.getDate()).slice(-2) +$hh +".png";
			
			//24H予想（4時頃更新：前日21時初期値、15時頃更新：9時初期値）
			$hour=$now.getHours();
			$hh  ="09"; if( $hour>=4 && $hour<15 ){ $hh="21"; }
			$time=$now; if( $hour>=15 ){ $time.setDate($time.getDate()+1); }
			document.map24.src="https://www.jma.go.jp/jp/g3/images/jp_c/24h/" +$time.getFullYear().toString().slice(-2) +("0"+($time.getMonth()+1)).slice(-2) +("0"+$time.getDate()).slice(-2) +$hh +".png";
			
			//48H予想（6時頃更新：前日21時初期値、17時頃更新：9時初期値）
			$hour=$now.getHours();
			$hh  ="09"; if( 6<=$hour && $hour<17 ){ $hh="21"; }
			$time=$now; $time.setDate($time.getDate()+1); if( $hour>=17 ){ $time.setDate($time.getDate()+1); }
			document.map48.src="https://www.jma.go.jp/jp/g3/images/jp_c/48h/" +$time.getFullYear().toString().slice(-2) +("0"+($time.getMonth()+1)).slice(-2) +("0"+$time.getDate()).slice(-2) +$hh +".png";
		}
		
		function mkNOWCAST(){
			var $time=new Date(); $time.setMinutes( $time.getMinutes()-1 );
			var $mm  =("0"+Math.floor($time.getMinutes()/5)*5).slice(-2);
			document.nowcast.src ="https://www.jma.go.jp/jp/radnowc/imgs/radar/201/"+$time.getFullYear()+("0"+($time.getMonth()+1)).slice(-2)+("0"+$time.getDate()).slice(-2)+("0"+$time.getHours()).slice(-2)+$mm+"-00.png";
			
		}
		
	</script>
	
	<style>
	html, body {
		position: relative;
		height: 100%;
	}
	body {
		background: #eee;
		font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
		font-size: 14px;
		color:#000;
		margin: 0;
		padding: 0;
	}
	h2 {
		font-size: 18px;
	}
	.swiper-slide {
		text-align: center;
		background: #fff;
	}
	</style>
	
	<!-- LINK -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.4.2/css/swiper.min.css">
</head>



<body onLoad="mkInit()">
	<!-- Swiper JS -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.4.2/js/swiper.min.js"></script>
	
	<!-- Swiper -->
	<div class="swiper-container swiper-container-v">
		<div class="swiper-wrapper">
			<div class="swiper-slide">
				<span id="print_msg"></span><br>
				<h2>衛星画像：<span id="gms_name"></span></h2><br><img name="gms" src="" onclick="mkGMS()" width="100%">
			</div>
			
			<div class="swiper-slide">
				<div class="swiper-container swiper-container-h">
					<div class="swiper-wrapper">
						<div class="swiper-slide"><h2>実況天気図</h2><br><img name="map00" src="" width="100%"></div>
						<div class="swiper-slide"><h2>予想天気図（24時間後）</h2><br><img name="map24" src="" width="100%"></div>
						<div class="swiper-slide"><h2>予想天気図（48時間後）</h2><br><img name="map48" src="" width="100%"></div>
					</div>
					<!-- Add Pagination -->
					<div class="swiper-pagination swiper-pagination-h"></div>
				</div>
			</div>
			
			<div class="swiper-slide">
				<h2>ナウキャスト</h2><br>
				<a href="https://www.jma.go.jp/jp/highresorad/"><img name="nowcast" src="" width="100%"></a>
			</div>
			
			<div class="swiper-slide">850温位
			</div>
			
			<div class="swiper-slide">高層1
			</div>
			
			<div class="swiper-slide">高層2
			</div>
		</div>
		
		<!-- Add Pagination -->
		<div class="swiper-pagination swiper-pagination-v"></div>
		
	</div>



	<!-- Initialize Swiper -->
	<script>
		var swiperH = new Swiper('.swiper-container-h', {
		spaceBetween: 50,
		pagination: {
		el: '.swiper-pagination-h',
		clickable: true,
		},
		});
		var swiperV = new Swiper('.swiper-container-v', {
		direction: 'vertical',
		spaceBetween: 50,
		pagination: {
		el: '.swiper-pagination-v',
		clickable: true,
		},
		});
  </script>



</body>
</html>
